<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="stylesheet"
            as="style"
            crossorigin
            href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"
        />
        <title>API Sample</title>
        <style>
            body {
                display: flex;
                align-items: center;
                flex-direction: column;
                justify-content: center;
                height: 100vh;
                margin: 0;
                background-color: #333;
            }
            span {
                font-size: 30px;
            }
            select {
                height: 30px;
                transition: 0.1s;
                border-radius: 5px;
                cursor: pointer;
            }
            div {
                display: flex;
                align-items: center;
            }
            * {
                font-weight: 500;
            }
            textarea {
                border-radius: 10px;
                outline: unset;
                padding: 5px;
            }
            option {
                border-radius: 10px;
            }
            textarea,
            select,
            input {
                transition: outline 0.1s;
                outline: 0px solid #fff;
            }
            textarea:hover,
            select:hover,
            input:hover {
                outline-width: 3px !important;
            }
            span {
                color: #fff;
            }
            input {
                border-radius: 5px;
                border: unset;
                padding: 5px;
            }
            pre {
                background-color: #000;
                color: #fff;
                width: 50vw;
                height: 10vh;
                border-radius: 5px;
                padding: 5px;
                white-space: pre-wrap;
                word-break: break-all;
                overflow-y: scroll;
            }
        </style>
    </head>
    <body>
        <textarea
            style="width: 50vw; height: 10vh; margin-bottom: 10px"
        ></textarea>
        <div>
            <span style="margin-right: 10px">원본 언어</span>
            <select id="start">
                <option value="ko">한국어</option>
                <option value="en">영어</option>
                <option value="ja">일본어</option>
                <option value="zh-CN">중국어 간체</option>
                <option value="zh-TW">중국어 번체</option>
                <option value="es">스페인어</option>
                <option value="fr">프랑스어</option>
                <option value="de">독일어</option>
                <option value="ru">러시아어</option>
                <option value="pt">포르투갈어</option>
                <option value="th">태국어</option>
                <option value="vi">베트남어</option>
                <option value="id">인도네시아어</option>
                <option value="hi">힌디어</option>
            </select>
            <div style="display: inline-block; width: 10vw"></div>
            <span style="margin-right: 10px">번역 언어</span>
            <select id="end">
                <option value="ko">한국어</option>
                <option value="en" selected>영어</option>
                <option value="ja">일본어</option>
                <option value="zh-CN">중국어 간체</option>
                <option value="zh-TW">중국어 번체</option>
                <option value="es">스페인어</option>
                <option value="fr">프랑스어</option>
                <option value="de">독일어</option>
                <option value="ru">러시아어</option>
                <option value="pt">포르투갈어</option>
                <option value="th">태국어</option>
                <option value="vi">베트남어</option>
                <option value="id">인도네시아어</option>
                <option value="hi">힌디어</option>
            </select>
        </div>
        <hr style="width: 50vw; border: 1px solid #555" />
        <input
            style="margin-top: 10px; width: 50vw"
            type="text"
            value="https://etranslation.vercel.app/?text=&source=ko&target=en"
        />
        <pre>message : no text</pre>
        <input
            type="button"
            value="요청 받기"
            style="
                margin-left: 50vw;
                transform: translateX(-50%) translateY(-45px);
                cursor: pointer;
            "
            onclick="getData()"
        />
        <p style="color: #fff; margin: 0">
            Console 탭에서 더 많은 정보를 확인하실 수 있습니다!
        </p>
        <script>
            console.log(
                "입력된 값이 변경 됨 : https://etranslation.vercel.app/?text=&source=ko&target=en"
            );
            function test() {
                document.querySelector(
                    "input"
                ).value = `https://etranslation.vercel.app/?text=${
                    document.querySelector("textarea").value
                }&source=${
                    document.querySelector("#start").options[
                        document.querySelector("#start").selectedIndex
                    ].value
                }&target=${
                    document.querySelector("#end").options[
                        document.querySelector("#end").selectedIndex
                    ].value
                }`;
                console.log(
                    "입력된 값이 변경 됨 : " +
                        document.querySelector("input").value
                );
            }
            function getData() {
                console.log(
                    "다음으로 요청 보내짐 : " +
                        document.querySelector("input").value
                );
                fetch(document.querySelector("input").value)
                    .then((r) => r.json())
                    .then((d) => {
                        let result = "";
                        for (k in d) {
                            result += k + " : " + d[k] + "\n";
                        }
                        document.querySelector("pre").innerText =
                            result + "\n\n" + d;
                        console.log("다음 요청을 받음");
                        console.log(d);
                    });
            }
            document.querySelector("textarea").addEventListener("input", test);
            document.querySelector("#start").addEventListener("change", test);
            document.querySelector("#end").addEventListener("change", test);
            document.querySelector("input").addEventListener("change", test);
        </script>
    </body>
</html>
